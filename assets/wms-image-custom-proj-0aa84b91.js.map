{"version":3,"file":"wms-image-custom-proj-0aa84b91.js","sources":["../../node_modules/ol/source/ImageWMS.js","../../node_modules/ol/control/ScaleLine.js","../../wms-image-custom-proj.js"],"sourcesContent":["/**\n * @module ol/source/ImageWMS\n */\n\nimport ImageSource, {defaultImageLoadFunction} from './Image.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport {createLoader, getFeatureInfoUrl, getLegendUrl} from './wms.js';\nimport {decode} from '../Image.js';\nimport {get as getProjection, transform} from '../proj.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"./wms.js\").ServerType} [serverType] The type of\n * the remote WMS server: `mapserver`, `geoserver`, `carmentaserver`, or `qgis`.\n * Only needed if `hidpi` is `true`.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {Object<string,*>} [params] WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [ratio=1.5] Ratio. `1` means image requests are the size of the map viewport, `2` means\n * twice the width and height of the map viewport, and so on. Must be `1` or higher.\n * @property {Array<number>} [resolutions] Resolutions.\n * If specified, requests will be made for these resolutions only.\n * @property {string} [url] WMS service URL.\n */\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @fires module:ol/source/Image.ImageSourceEvent\n * @api\n */\nclass ImageWMS extends ImageSource {\n  /**\n   * @param {Options} [options] ImageWMS options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      attributions: options.attributions,\n      interpolate: options.interpolate,\n      projection: options.projection,\n      resolutions: options.resolutions,\n    });\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").LoadFunction}\n     */\n    this.imageLoadFunction_ =\n      options.imageLoadFunction !== undefined\n        ? options.imageLoadFunction\n        : defaultImageLoadFunction;\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = options.params;\n\n    /**\n     * @private\n     * @type {import(\"./wms.js\").ServerType}\n     */\n    this.serverType_ = options.serverType;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRevision_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.loaderProjection_ = null;\n  }\n\n  /**\n   * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n   * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n   * constructed.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n   *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n   *     in the `LAYERS` parameter will be used. `VERSION` should not be\n   *     specified here.\n   * @return {string|undefined} GetFeatureInfo URL.\n   * @api\n   */\n  getFeatureInfoUrl(coordinate, resolution, projection, params) {\n    const projectionObj = getProjection(projection);\n    const sourceProjectionObj = this.getProjection();\n\n    if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n      resolution = calculateSourceResolution(\n        sourceProjectionObj,\n        projectionObj,\n        coordinate,\n        resolution\n      );\n      coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n    }\n\n    const options = {\n      url: this.url_,\n      params: {\n        ...this.params_,\n        ...params,\n      },\n      projection: sourceProjectionObj || projectionObj,\n    };\n    return getFeatureInfoUrl(options, coordinate, resolution);\n  }\n\n  /**\n   * Return the GetLegendGraphic URL, optionally optimized for the passed\n   * resolution and possibly including any passed specific parameters. Returns\n   * `undefined` if the GetLegendGraphic URL cannot be constructed.\n   *\n   * @param {number} [resolution] Resolution. If set to undefined, `SCALE`\n   *     will not be calculated and included in URL.\n   * @param {Object} [params] GetLegendGraphic params. If `LAYER` is set, the\n   *     request is generated for this wms layer, else it will try to use the\n   *     configured wms layer. Default `FORMAT` is `image/png`.\n   *     `VERSION` should not be specified here.\n   * @return {string|undefined} GetLegendGraphic URL.\n   * @api\n   */\n  getLegendUrl(resolution, params) {\n    return getLegendUrl(\n      {\n        url: this.url_,\n        params: {\n          ...this.params_,\n          ...params,\n        },\n      },\n      resolution\n    );\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../Image.js\").default} Single image.\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    if (this.url_ === undefined) {\n      return null;\n    }\n    if (!this.loader || this.loaderProjection_ !== projection) {\n      // Lazily create loader to pick up the view projection and to allow `params` updates\n      this.loaderProjection_ = projection;\n      this.loader = createLoader({\n        crossOrigin: this.crossOrigin_,\n        params: this.params_,\n        projection: projection,\n        serverType: this.serverType_,\n        hidpi: this.hidpi_,\n        url: this.url_,\n        ratio: this.ratio_,\n        load: (image, src) => {\n          this.image.setImage(image);\n          this.imageLoadFunction_(this.image, src);\n          return decode(image);\n        },\n      });\n    }\n\n    return super.getImageInternal(extent, resolution, pixelRatio, projection);\n  }\n\n  /**\n   * Return the image load function of the source.\n   * @return {import(\"../Image.js\").LoadFunction} The image load function.\n   * @api\n   */\n  getImageLoadFunction() {\n    return this.imageLoadFunction_;\n  }\n\n  /**\n   * Return the URL used for this WMS source.\n   * @return {string|undefined} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * Set the image load function of the source.\n   * @param {import(\"../Image.js\").LoadFunction} imageLoadFunction Image load function.\n   * @api\n   */\n  setImageLoadFunction(imageLoadFunction) {\n    this.imageLoadFunction_ = imageLoadFunction;\n    this.changed();\n  }\n\n  /**\n   * Set the URL to use for requests.\n   * @param {string|undefined} url URL.\n   * @api\n   */\n  setUrl(url) {\n    if (url != this.url_) {\n      this.url_ = url;\n      this.loader = null;\n      this.changed();\n    }\n  }\n\n  /**\n   * Update the user-provided params.\n   * @param {Object} params Params.\n   * @api\n   */\n  updateParams(params) {\n    Object.assign(this.params_, params);\n    this.changed();\n  }\n\n  changed() {\n    this.image = null;\n    super.changed();\n  }\n}\n\nexport default ImageWMS;\n","/**\n * @module ol/control/ScaleLine\n */\nimport Control from './Control.js';\nimport {CLASS_UNSELECTABLE} from '../css.js';\nimport {METERS_PER_UNIT, getPointResolution} from '../proj.js';\n\n/**\n * @type {string}\n */\nconst UNITS_PROP = 'units';\n\n/**\n * @typedef {'degrees' | 'imperial' | 'nautical' | 'metric' | 'us'} Units\n * Units for the scale line.\n */\n\n/**\n * @const\n * @type {Array<number>}\n */\nconst LEADING_DIGITS = [1, 2, 5];\n\n/**\n * @const\n * @type {number}\n */\nconst DEFAULT_DPI = 25.4 / 0.28;\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:units', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types\n *     |'change:units', Return>} ScaleLineOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {string} [className] CSS class name. The default is `ol-scale-bar` when configured with\n * `bar: true`. Otherwise the default is `ol-scale-line`.\n * @property {number} [minWidth=64] Minimum width in pixels at the OGC default dpi. The width will be\n * adjusted to match the dpi used.\n * @property {number} [maxWidth] Maximum width in pixels at the OGC default dpi. The width will be\n * adjusted to match the dpi used.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {Units} [units='metric'] Units.\n * @property {boolean} [bar=false] Render scalebars instead of a line.\n * @property {number} [steps=4] Number of steps the scalebar should use. Use even numbers\n * for best results. Only applies when `bar` is `true`.\n * @property {boolean} [text=false] Render the text scale above of the scalebar. Only applies\n * when `bar` is `true`.\n * @property {number|undefined} [dpi=undefined] dpi of output device such as printer. Only applies\n * when `bar` is `true`. If undefined the OGC default screen pixel size of 0.28mm will be assumed.\n */\n\n/**\n * @classdesc\n * A control displaying rough y-axis distances, calculated for the center of the\n * viewport. For conformal projections (e.g. EPSG:3857, the default view\n * projection in OpenLayers), the scale is valid for all directions.\n * No scale line will be shown when the y-axis distance of a pixel at the\n * viewport center cannot be calculated in the view projection.\n * By default the scale line will show in the bottom left portion of the map,\n * but this can be changed by using the css selector `.ol-scale-line`.\n * When specifying `bar` as `true`, a scalebar will be rendered instead\n * of a scaleline.\n *\n * @api\n */\nclass ScaleLine extends Control {\n  /**\n   * @param {Options} [options] Scale line options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    const element = document.createElement('div');\n    element.style.pointerEvents = 'none';\n\n    super({\n      element: element,\n      render: options.render,\n      target: options.target,\n    });\n\n    /***\n     * @type {ScaleLineOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ScaleLineOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ScaleLineOnSignature<void>}\n     */\n    this.un;\n\n    const className =\n      options.className !== undefined\n        ? options.className\n        : options.bar\n        ? 'ol-scale-bar'\n        : 'ol-scale-line';\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.innerElement_ = document.createElement('div');\n    this.innerElement_.className = className + '-inner';\n\n    this.element.className = className + ' ' + CLASS_UNSELECTABLE;\n    this.element.appendChild(this.innerElement_);\n\n    /**\n     * @private\n     * @type {?import(\"../View.js\").State}\n     */\n    this.viewState_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minWidth_ = options.minWidth !== undefined ? options.minWidth : 64;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.maxWidth_ = options.maxWidth;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = false;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.renderedWidth_ = undefined;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.renderedHTML_ = '';\n\n    this.addChangeListener(UNITS_PROP, this.handleUnitsChanged_);\n\n    this.setUnits(options.units || 'metric');\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.scaleBar_ = options.bar || false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.scaleBarSteps_ = options.steps || 4;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.scaleBarText_ = options.text || false;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.dpi_ = options.dpi || undefined;\n  }\n\n  /**\n   * Return the units to use in the scale line.\n   * @return {Units} The units\n   * to use in the scale line.\n   * @observable\n   * @api\n   */\n  getUnits() {\n    return this.get(UNITS_PROP);\n  }\n\n  /**\n   * @private\n   */\n  handleUnitsChanged_() {\n    this.updateElement_();\n  }\n\n  /**\n   * Set the units to use in the scale line.\n   * @param {Units} units The units to use in the scale line.\n   * @observable\n   * @api\n   */\n  setUnits(units) {\n    this.set(UNITS_PROP, units);\n  }\n\n  /**\n   * Specify the dpi of output device such as printer.\n   * @param {number|undefined} dpi The dpi of output device.\n   * @api\n   */\n  setDpi(dpi) {\n    this.dpi_ = dpi;\n  }\n\n  /**\n   * @private\n   */\n  updateElement_() {\n    const viewState = this.viewState_;\n\n    if (!viewState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const center = viewState.center;\n    const projection = viewState.projection;\n    const units = this.getUnits();\n    const pointResolutionUnits = units == 'degrees' ? 'degrees' : 'm';\n    let pointResolution = getPointResolution(\n      projection,\n      viewState.resolution,\n      center,\n      pointResolutionUnits\n    );\n\n    const minWidth =\n      (this.minWidth_ * (this.dpi_ || DEFAULT_DPI)) / DEFAULT_DPI;\n\n    const maxWidth =\n      this.maxWidth_ !== undefined\n        ? (this.maxWidth_ * (this.dpi_ || DEFAULT_DPI)) / DEFAULT_DPI\n        : undefined;\n\n    let nominalCount = minWidth * pointResolution;\n    let suffix = '';\n    if (units == 'degrees') {\n      const metersPerDegree = METERS_PER_UNIT.degrees;\n      nominalCount *= metersPerDegree;\n      if (nominalCount < metersPerDegree / 60) {\n        suffix = '\\u2033'; // seconds\n        pointResolution *= 3600;\n      } else if (nominalCount < metersPerDegree) {\n        suffix = '\\u2032'; // minutes\n        pointResolution *= 60;\n      } else {\n        suffix = '\\u00b0'; // degrees\n      }\n    } else if (units == 'imperial') {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution /= 0.0254;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.3048;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.344;\n      }\n    } else if (units == 'nautical') {\n      pointResolution /= 1852;\n      suffix = 'NM';\n    } else if (units == 'metric') {\n      if (nominalCount < 0.001) {\n        suffix = 'μm';\n        pointResolution *= 1000000;\n      } else if (nominalCount < 1) {\n        suffix = 'mm';\n        pointResolution *= 1000;\n      } else if (nominalCount < 1000) {\n        suffix = 'm';\n      } else {\n        suffix = 'km';\n        pointResolution /= 1000;\n      }\n    } else if (units == 'us') {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution *= 39.37;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.30480061;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.3472;\n      }\n    } else {\n      throw new Error('Invalid units');\n    }\n\n    let i = 3 * Math.floor(Math.log(minWidth * pointResolution) / Math.log(10));\n    let count, width, decimalCount;\n    let previousCount, previousWidth, previousDecimalCount;\n    while (true) {\n      decimalCount = Math.floor(i / 3);\n      const decimal = Math.pow(10, decimalCount);\n      count = LEADING_DIGITS[((i % 3) + 3) % 3] * decimal;\n      width = Math.round(count / pointResolution);\n      if (isNaN(width)) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n        return;\n      }\n      if (maxWidth !== undefined && width >= maxWidth) {\n        count = previousCount;\n        width = previousWidth;\n        decimalCount = previousDecimalCount;\n        break;\n      } else if (width >= minWidth) {\n        break;\n      }\n      previousCount = count;\n      previousWidth = width;\n      previousDecimalCount = decimalCount;\n      ++i;\n    }\n    const html = this.scaleBar_\n      ? this.createScaleBar(width, count, suffix)\n      : count.toFixed(decimalCount < 0 ? -decimalCount : 0) + ' ' + suffix;\n\n    if (this.renderedHTML_ != html) {\n      this.innerElement_.innerHTML = html;\n      this.renderedHTML_ = html;\n    }\n\n    if (this.renderedWidth_ != width) {\n      this.innerElement_.style.width = width + 'px';\n      this.renderedWidth_ = width;\n    }\n\n    if (!this.renderedVisible_) {\n      this.element.style.display = '';\n      this.renderedVisible_ = true;\n    }\n  }\n\n  /**\n   * @private\n   * @param {number} width The current width of the scalebar.\n   * @param {number} scale The current scale.\n   * @param {string} suffix The suffix to append to the scale text.\n   * @return {string} The stringified HTML of the scalebar.\n   */\n  createScaleBar(width, scale, suffix) {\n    const resolutionScale = this.getScaleForResolution();\n    const mapScale =\n      resolutionScale < 1\n        ? Math.round(1 / resolutionScale).toLocaleString() + ' : 1'\n        : '1 : ' + Math.round(resolutionScale).toLocaleString();\n    const steps = this.scaleBarSteps_;\n    const stepWidth = width / steps;\n    const scaleSteps = [this.createMarker('absolute')];\n    for (let i = 0; i < steps; ++i) {\n      const cls =\n        i % 2 === 0 ? 'ol-scale-singlebar-odd' : 'ol-scale-singlebar-even';\n      scaleSteps.push(\n        '<div>' +\n          '<div ' +\n          `class=\"ol-scale-singlebar ${cls}\" ` +\n          `style=\"width: ${stepWidth}px;\"` +\n          '>' +\n          '</div>' +\n          this.createMarker('relative') +\n          // render text every second step, except when only 2 steps\n          (i % 2 === 0 || steps === 2\n            ? this.createStepText(i, width, false, scale, suffix)\n            : '') +\n          '</div>'\n      );\n    }\n    // render text at the end\n    scaleSteps.push(this.createStepText(steps, width, true, scale, suffix));\n\n    const scaleBarText = this.scaleBarText_\n      ? `<div class=\"ol-scale-text\" style=\"width: ${width}px;\">` +\n        mapScale +\n        '</div>'\n      : '';\n    return scaleBarText + scaleSteps.join('');\n  }\n\n  /**\n   * Creates a marker at given position\n   * @param {'absolute'|'relative'} position The position, absolute or relative\n   * @return {string} The stringified div containing the marker\n   */\n  createMarker(position) {\n    const top = position === 'absolute' ? 3 : -10;\n    return (\n      '<div ' +\n      'class=\"ol-scale-step-marker\" ' +\n      `style=\"position: ${position}; top: ${top}px;\"` +\n      '></div>'\n    );\n  }\n\n  /**\n   * Creates the label for a marker marker at given position\n   * @param {number} i The iterator\n   * @param {number} width The width the scalebar will currently use\n   * @param {boolean} isLast Flag indicating if we add the last step text\n   * @param {number} scale The current scale for the whole scalebar\n   * @param {string} suffix The suffix for the scale\n   * @return {string} The stringified div containing the step text\n   */\n  createStepText(i, width, isLast, scale, suffix) {\n    const length =\n      i === 0 ? 0 : Math.round((scale / this.scaleBarSteps_) * i * 100) / 100;\n    const lengthString = length + (i === 0 ? '' : ' ' + suffix);\n    const margin = i === 0 ? -3 : (width / this.scaleBarSteps_) * -1;\n    const minWidth = i === 0 ? 0 : (width / this.scaleBarSteps_) * 2;\n    return (\n      '<div ' +\n      'class=\"ol-scale-step-text\" ' +\n      'style=\"' +\n      `margin-left: ${margin}px;` +\n      `text-align: ${i === 0 ? 'left' : 'center'};` +\n      `min-width: ${minWidth}px;` +\n      `left: ${isLast ? width + 'px' : 'unset'};` +\n      '\">' +\n      lengthString +\n      '</div>'\n    );\n  }\n\n  /**\n   * Returns the appropriate scale for the given resolution and units.\n   * @return {number} The appropriate scale.\n   */\n  getScaleForResolution() {\n    const resolution = getPointResolution(\n      this.viewState_.projection,\n      this.viewState_.resolution,\n      this.viewState_.center,\n      'm'\n    );\n    const dpi = this.dpi_ || DEFAULT_DPI;\n    const inchesPerMeter = 1000 / 25.4;\n    return resolution * inchesPerMeter * dpi;\n  }\n\n  /**\n   * Update the scale line element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n  render(mapEvent) {\n    const frameState = mapEvent.frameState;\n    if (!frameState) {\n      this.viewState_ = null;\n    } else {\n      this.viewState_ = frameState.viewState;\n    }\n    this.updateElement_();\n  }\n}\n\nexport default ScaleLine;\n","import ImageLayer from 'ol/layer/Image.js';\nimport ImageWMS from 'ol/source/ImageWMS.js';\nimport Map from 'ol/Map.js';\nimport Projection from 'ol/proj/Projection.js';\nimport View from 'ol/View.js';\nimport {proj4} from './assets/js/proj4.js';\nimport {ScaleLine, defaults as defaultControls} from 'ol/control.js';\nimport {fromLonLat} from 'ol/proj.js';\nimport {register} from 'ol/proj/proj4.js';\n\n// Transparent Proj4js support:\n//\n// EPSG:21781 is known to Proj4js because its definition is registered by\n// calling proj4.defs(). Now when we create an ol/proj/Projection instance with\n// the 'EPSG:21781' code, OpenLayers will pick up the transform functions from\n// Proj4js. To get the registered ol/proj/Projection instance with other\n// parameters like units and axis orientation applied from Proj4js, use\n// `ol/proj#get('EPSG:21781')`.\n//\n// Note that we are setting the projection's extent here, which is used to\n// determine the view resolution for zoom level 0. Recommended values for a\n// projection's validity extent can be found at https://epsg.io/.\n\nproj4.defs(\n  'EPSG:21781',\n  '+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 ' +\n    '+x_0=600000 +y_0=200000 +ellps=bessel ' +\n    '+towgs84=660.077,13.551,369.344,2.484,1.783,2.939,5.66 +units=m +no_defs'\n);\nregister(proj4);\n\nconst projection = new Projection({\n  code: 'EPSG:21781',\n  extent: [485869.5728, 76443.1884, 837076.5648, 299941.7864],\n});\n\nconst extent = [420000, 30000, 900000, 350000];\nconst layers = [\n  new ImageLayer({\n    extent: extent,\n    source: new ImageWMS({\n      url: 'https://wms.geo.admin.ch/',\n      crossOrigin: 'anonymous',\n      attributions:\n        '© <a href=\"https://shop.swisstopo.admin.ch/en/products/maps/national/lk1000\"' +\n        'target=\"_blank\">Pixelmap 1:1000000 / geo.admin.ch</a>',\n      params: {\n        'LAYERS': 'ch.swisstopo.pixelkarte-farbe-pk1000.noscale',\n        'FORMAT': 'image/jpeg',\n      },\n      serverType: 'mapserver',\n    }),\n  }),\n  new ImageLayer({\n    extent: extent,\n    source: new ImageWMS({\n      url: 'https://wms.geo.admin.ch/',\n      crossOrigin: 'anonymous',\n      attributions:\n        '© <a href=\"https://www.hydrodaten.admin.ch/en/notes-on-the-flood-alert-maps.html\"' +\n        'target=\"_blank\">Flood Alert / geo.admin.ch</a>',\n      params: {'LAYERS': 'ch.bafu.hydroweb-warnkarte_national'},\n      serverType: 'mapserver',\n    }),\n  }),\n];\n\nconst map = new Map({\n  controls: defaultControls().extend([new ScaleLine()]),\n  layers: layers,\n  target: 'map',\n  view: new View({\n    projection: projection,\n    center: fromLonLat([8.23, 46.86], projection),\n    extent: extent,\n    zoom: 2,\n  }),\n});\n"],"names":["ImageWMS","ImageSource","options","defaultImageLoadFunction","coordinate","resolution","projection","params","projectionObj","getProjection","sourceProjectionObj","calculateSourceResolution","transform","getFeatureInfoUrl","getLegendUrl","extent","pixelRatio","createLoader","image","src","decode","imageLoadFunction","url","ImageWMS$1","UNITS_PROP","LEADING_DIGITS","DEFAULT_DPI","ScaleLine","Control","element","className","CLASS_UNSELECTABLE","units","dpi","viewState","center","pointResolutionUnits","pointResolution","getPointResolution","minWidth","maxWidth","nominalCount","suffix","metersPerDegree","METERS_PER_UNIT","i","count","width","decimalCount","previousCount","previousWidth","previousDecimalCount","decimal","html","scale","resolutionScale","mapScale","steps","stepWidth","scaleSteps","cls","position","isLast","lengthString","margin","inchesPerMeter","mapEvent","frameState","ScaleLine$1","proj4","register","Projection","layers","ImageLayer","Map","defaultControls","View","fromLonLat"],"mappings":"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","x_google_ignoreList":[0,1]}